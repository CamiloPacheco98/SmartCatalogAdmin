<!-- Main Content -->
<main class="home-content">
  <div class="content-wrapper">
    <!-- Sign-in Link Section -->
    <div class="upload-section">
      <div class="upload-card">
        <h3>{{ 'app.home.sendSigninLink.title' | translate }}</h3>
        <p>{{ 'app.home.sendSigninLink.subtitle' | translate }}</p>

        <div class="signin-form">
          <div class="form-group">
            <label for="userEmail">{{ 'app.home.sendSigninLink.email' | translate }}</label>
            <input type="email" id="userEmail" [(ngModel)]="signinEmail"
              placeholder="{{ 'app.home.sendSigninLink.email.placeholder' | translate }}" class="form-input">
          </div>

          @if(signinError){
          <div class="error-message">
            {{ signinError }}
          </div>
          }

          @if(signinSuccess){
          <div class="success-message">
            âœ… {{ 'app.home.sendSigninLink.success' | translate }}
          </div>
          }

          <div class="upload-actions">
            <button class="upload-btn" [disabled]="!signinEmail || isSendingLink" (click)="sendSigninLink()">
              @if(!isSendingLink){
              <span>{{ 'app.home.sendSigninLink.button' | translate }}</span>
              }@else{
              <span>{{ 'app.home.sendSigninLink.button.loading' | translate }}</span>
              }
            </button>
          </div>

          @if(isSendingLink){
          <div class="progress-message">
            <div class="spinner"></div>
            <span>{{ 'app.home.sendSigninLink.loading' | translate }}</span>
          </div>
          }
        </div>
      </div>
    </div>

    <!-- PDF Upload Section -->
    <div class="upload-section">
      <div class="upload-card">
        <h3>{{ 'app.home.uploadPdf.title' | translate }}</h3>
        <p>{{ 'app.home.uploadPdf.subtitle' | translate }}</p>

        <div class="upload-area" [class.drag-over]="isDragOver" (dragover)="onDragOver($event)"
          (dragleave)="onDragLeave($event)" (drop)="onDrop($event)" (click)="fileInput.click()">
          <div class="upload-content">
            <div class="upload-icon">ðŸ“„</div>
            <p class="upload-text">
              <strong>{{ 'app.home.uploadPdf.button.browse' | translate }}</strong> {{ 'app.home.uploadPdf.button.or' |
              translate }}
            </p>
            <p class="upload-hint">{{ 'app.home.uploadPdf.maxSize' | translate }}</p>
          </div>
        </div>

        <input #fileInput type="file" accept=".pdf" (change)="onFileSelected($event)" style="display: none;">
        @if(selectedFile){
        <div *ngIf="selectedFile" class="file-info">
          <div class="file-details">
            <span class="file-name">{{ selectedFile.name }}</span>
            <span class="file-size">{{ pdfFileSize }}</span>
          </div>
          <button class="remove-file-btn" (click)="removeFile()">Ã—</button>
        </div>
        }
        @if(uploadError){
        <div class="error-message">
          {{ uploadError }}
        </div>
        }
        <div class="upload-actions">
          <button class="upload-btn" [disabled]="!selectedFile || isUploading" (click)="uploadFile()">
            @if(!isUploading){
            <span>{{ 'app.home.uploadPdf.button.upload' | translate }}</span>
            }@else{
            <span>{{ 'app.home.uploadPdf.button.loading' | translate }}</span>
            }

          </button>
        </div>

        @if(isUploading && uploadProgress){
        <div class="progress-message">
          <div class="spinner"></div>
          <span>{{ uploadProgress }}</span>
        </div>
        }

        @if(uploadSuccess){
        <div class="success-message">
          âœ… {{ 'app.home.uploadPdf.success' | translate }}
        </div>
        }
      </div>
    </div>

    <!-- JSON Upload Section -->
    <div class="upload-section">
      <div class="upload-card">
        <h3>{{ 'app.home.uploadJson.title' | translate }}</h3>
        <p>{{ 'app.home.uploadJson.subtitle' | translate }}</p>

        <div class="upload-area" [class.drag-over]="isJsonDragOver" (dragover)="onJsonDragOver($event)"
          (dragleave)="onJsonDragLeave($event)" (drop)="onJsonDrop($event)" (click)="jsonFileInput.click()">
          <div class="upload-content">
            <div class="upload-icon">ðŸ“‹</div>
            <p class="upload-text">
              <strong>{{ 'app.home.uploadJson.button.browse' | translate }}</strong> {{ 'app.home.uploadJson.button.or' |
              translate }}
            </p>
            <p class="upload-hint">{{ 'app.home.uploadJson.maxSize' | translate }}</p>
          </div>
        </div>

        <input #jsonFileInput type="file" accept=".json,application/json" (change)="onJsonFileSelected($event)"
          style="display: none;">

        @if(selectedJsonFile){
        <div class="file-info">
          <div class="file-details">
            <span class="file-name">{{ selectedJsonFile.name }}</span>
            <span class="file-size">{{ jsonFileSize }}</span>
            @if(jsonData){
            <span class="file-size">âœ“ {{ 'app.home.uploadJson.valid' | translate }}</span>
            }
          </div>
          <button class="remove-file-btn" (click)="removeJsonFile()">Ã—</button>
        </div>
        }

        @if(jsonUploadError){
        <div class="error-message">
          {{ jsonUploadError }}
        </div>
        }

        <div class="upload-actions">
          <button class="upload-btn" [disabled]="!selectedJsonFile || !jsonData || isJsonUploading"
            (click)="uploadJsonFile()">
            @if(!isJsonUploading){
            <span>{{ 'app.home.uploadJson.button.upload' | translate }}</span>
            }@else{
            <span>{{ 'app.home.uploadJson.button.loading' | translate }}</span>
            }
          </button>
        </div>

        @if(jsonUploadSuccess){
        <div class="success-message">
          âœ… {{ 'app.home.uploadJson.success' | translate }}
        </div>
        }
      </div>
    </div>
  </div>
</main>